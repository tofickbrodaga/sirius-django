<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Strains List</title>
</head>
<body>
    <h1>Strains List</h1>
    <form method="GET">
        <select name="search_type" id="search_type">
            <option value="name" {% if request.GET.search_type == "name" %}selected{% endif %}>Search by Name</option>
            <option value="date" {% if request.GET.search_type == "date" %}selected{% endif %}>Search by Date</option>
            <option value="responsible" {% if request.GET.search_type == "responsible" %}selected{% endif %}>Search by Responsible</option>
        </select>
        
        <div id="search_name" {% if request.GET.search_type != "name" %}style="display:none"{% endif %}>
            <input type="text" name="q" placeholder="Search by name" value="{{ request.GET.q }}">
        </div>
        
        <div id="search_date" {% if request.GET.search_type != "date" %}style="display:none"{% endif %}>
            <input type="date" name="date_from" placeholder="From" value="{{ request.GET.date_from }}">
            <input type="date" name="date_to" placeholder="To" value="{{ request.GET.date_to }}">
        </div>
        
        <div id="search_responsible" {% if request.GET.search_type != "responsible" %}style="display:none"{% endif %}>
            <input type="text" name="responsible" placeholder="Responsible" value="{{ request.GET.responsible }}">
        </div>
        
        <button type="submit">Search</button>
    </form>
    <ul>
        {% for strain in strains %}
            <li>
                <strong>UIN:</strong> {{ strain.UIN }}<br>
                <strong>Name:</strong> {{ strain.name }}<br>
                <strong>Creation Date:</strong> {{ strain.creation_date }}<br>
                <strong>Created by:</strong> {{ strain.created_by.username }}
            </li>
        {% endfor %}
    </ul>
    <div>
        {% if strains.has_previous %}
            <a href="?page={{ strains.previous_page_number }}{% if request.GET.search_type %}&search_type={{ request.GET.search_type }}{% endif %}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if request.GET.date_from %}&date_from={{ request.GET.date_from }}{% endif %}{% if request.GET.date_to %}&date_to={{ request.GET.date_to }}{% endif %}{% if request.GET.responsible %}&responsible={{ request.GET.responsible }}{% endif %}">Previous</a>
        {% endif %}
        
        <span>Page {{ strains.number }} of {{ strains.paginator.num_pages }}</span>
        
        {% if strains.has_next %}
            <a href="?page={{ strains.next_page_number }}{% if request.GET.search_type %}&search_type={{ request.GET.search_type }}{% endif %}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}{% if request.GET.date_from %}&date_from={{ request.GET.date_from }}{% endif %}{% if request.GET.date_to %}&date_to={{ request.GET.date_to }}{% endif %}{% if request.GET.responsible %}&responsible={{ request.GET.responsible }}{% endif %}">Next</a>
        {% endif %}
    </div>
    
    <script>
        document.getElementById('search_type').addEventListener('change', function() {
            document.getElementById('search_name').style.display = this.value == 'name' ? 'block' : 'none';
            document.getElementById('search_date').style.display = this.value == 'date' ? 'block' : 'none';
            document.getElementById('search_responsible').style.display = this.value == 'responsible' ? 'block' : 'none';
        });
    </script>
</body>
</html>
